

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Docker Environment &mdash; Processor SDK Linux for Edge AI Documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  
    <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Processor SDK Linux for Edge AI Documentation" href="index.html"/>
        <link rel="next" title="Data Flows" href="data_flows.html"/>
        <link rel="prev" title="Running Advance demos" href="running_advance_demos.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">
  <header id="tiHeader">
    <div class="top">
      <ul>
        <li id="top_logo">
          <a href="http://www.ti.com">
            <img src="_static/img/ti_logo.png"/>
          </a>
        </li>
      </ul>
    </div>
    <div class="nav"></div>
  </header>
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Processor SDK Linux for Edge AI
          

          
          </a>

          
            
            
              <div class="version">
                08.02.01
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="sdk_overview.html">Processor SDK Linux for Edge AI</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_simple_demos.html">Running Simple demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="inference_models.html">DL models for Edge Inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration_file.html">Demo Configuration file</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_advance_demos.html">Running Advance demos</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Docker Environment</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#building-docker-image">Building Docker image</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-the-docker-container">Running the Docker container</a></li>
<li class="toctree-l2"><a class="reference internal" href="#handling-proxy-settings">Handling proxy settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="#additional-docker-commands">Additional Docker commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#relocating-docker-root-location">Relocating Docker Root Location</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="data_flows.html">Data Flows</a></li>
<li class="toctree-l1"><a class="reference internal" href="performance_visualizer.html">Performance Visualization Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="connectivity.html">Connectivity and Peripherals</a></li>
<li class="toctree-l1"><a class="reference internal" href="sdk_components.html">SDK Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">SDK Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="datasheet.html">Datasheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="test_report.html">Test Report</a></li>
<li class="toctree-l1"><a class="reference internal" href="development_flow.html">SDK Development flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQs</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Processor SDK Linux for Edge AI</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Docker Environment</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="docker-environment">
<span id="pub-edgeai-docker-env"></span><h1>Docker Environment<a class="headerlink" href="#docker-environment" title="Permalink to this headline">¶</a></h1>
<p>Docker is a set of “platform as a service” products that uses the OS-level
virtualization to deliver software in packages called containers.
Docker container provides a quick start environment to the developer to
run the out of box demos and build applications.</p>
<p>The Docker image is based on Ubuntu 20.04.LTS and contains different
open source components like OpenCV, GStreamer, Python and pip packages
which are required to run the demos. The user can choose to install any
additional 3rd party applications and packages as required.</p>
<div class="section" id="building-docker-image">
<span id="pub-edgeai-docker-build-ontarget"></span><h2>Building Docker image<a class="headerlink" href="#building-docker-image" title="Permalink to this headline">¶</a></h2>
<p>The <cite>docker/Dockerfile</cite> in the edge_ai_apps repo describes the recipe for
creating the Docker container image. Feel free to review and update it to
include additional packages before building the image.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Building Docker image on target using the provided Dockerfile will take
about 15-20 minutes to complete with good internet connection.
Building Docker containers on target can be slow and resource constrained.
The Dockerfile provided will build on target without any issues but if
you add more packages or build components from source, running out of memory
can be a common problem. As an alternative we highly recommend trying
QEMU builds for cross-compiling the images for arm64 architecture on a PC
and then load the compiled image on target.</p>
</div>
<p>Initiate the Docker image build as shown,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@j7-evm:/opt/edge_ai_apps/docker#./docker_build.sh
</pre></div>
</div>
</div>
<div class="section" id="running-the-docker-container">
<h2>Running the Docker container<a class="headerlink" href="#running-the-docker-container" title="Permalink to this headline">¶</a></h2>
<p>Enter the Docker session as shown,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@j7-evm:/opt/edge_ai_apps/docker#./docker_run.sh
</pre></div>
</div>
<p>This will start a Ubuntu 20.04.LTS image based Docker container and the prompt
will change as below,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>docker<span class="o">]</span> root@j7-evm:/opt/edge_ai_apps#
</pre></div>
</div>
<p>The Docker container has been created in privilege mode, so that it has root
capabilities to all devices on the target system like Network etc.
The container file system also mounts the target file system of /dev, /opt to
access camera, display and other hardware accelerators the SoC has to offer.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is highly recommended to use the docker_run.sh script to launch the
Docker container because this script will take care of saving any changes
made to the filesystem. This will make sure that any modifications to
the Docker filesystem including new package installation, updates to
some files and also command history is saved automatically and is
available the next time you launch the container. The container will
be committed only if you exit from the container explicitly. If you restart
the board without exiting container, any changes done from last saved state
will be lost.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>After building and running the docker container, one needs to run
<code class="docutils literal notranslate"><span class="pre">setup_script.sh</span></code> before running any of the demo applications.
Please refer to <a class="reference internal" href="getting_started.html#pub-edgeai-install-dependencies"><span class="std std-ref">Installing Dependencies</span></a> for more details.</p>
</div>
</div>
<div class="section" id="handling-proxy-settings">
<span id="pub-edgeai-docker-additional-commands"></span><h2>Handling proxy settings<a class="headerlink" href="#handling-proxy-settings" title="Permalink to this headline">¶</a></h2>
<p>If the board running the Docker container is behind a proxy server, the default
settings for downloading files and installing packages via apt-get will not work.
If you are running the board from TI network, docker build and run scripts will
automatically detect and configure necessary proxy settings</p>
<p>For other cases, you need to modify the script <code class="docutils literal notranslate"><span class="pre">/usr/bin/setup_proxy.sh</span></code>
to add the custom proxy settings required for your network.</p>
</div>
<div class="section" id="additional-docker-commands">
<h2>Additional Docker commands<a class="headerlink" href="#additional-docker-commands" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section is provided only for additional reference and not required to
run out-of-box demos</p>
</div>
<p><strong>Commit Docker container</strong></p>
<p>Generally, containers have a short life cycle. If the container has any local
changes it is good to save the changes on top of the existing Docker image.
When re-running the Docker image, the local changes can be restored.</p>
<p>Following commands show how to save the changes made to the last container.
Note that this is already done automatically by <code class="docutils literal notranslate"><span class="pre">docker_run.sh</span></code> when you exit
the container.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">cont_id</span><span class="o">=</span><span class="sb">`</span>docker ps -q -l<span class="sb">`</span>
docker commit <span class="nv">$cont_id</span> edge_ai_kit
docker container rm <span class="nv">$cont_id</span>
</pre></div>
</div>
<p>For more information refer:
<a class="reference external" href="https://docs.docker.com/engine/reference/commandline/commit/">Commit Docker image</a></p>
<p><strong>Save Docker Image</strong></p>
<p>Docker image can be saved as tar file by using the command below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker save --output &lt;pre_built_docker_image.tar&gt;
</pre></div>
</div>
<p>For more information refer here.
<a class="reference external" href="https://docs.docker.com/engine/reference/commandline/save/">Save Docker image</a></p>
<p><strong>Load Docker image</strong></p>
<p>Load a previously saved Docker image using the command below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker load --input &lt;pre_built_docker_image.tar&gt;
</pre></div>
</div>
<p>For more information refer here.
<a class="reference external" href="https://docs.docker.com/engine/reference/commandline/load/">Load Docker image</a></p>
<p><strong>Remove Docker image</strong></p>
<p>Docker image can be removed by using the command below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Remove selected image:
docker rmi &lt;image_name/ID&gt;

Remove all image:
docker image prune -a
</pre></div>
</div>
<p>For more information refer
<a class="reference external" href="https://docs.docker.com/engine/reference/commandline/rmi/">rmi reference</a> and
<a class="reference external" href="https://docs.docker.com/engine/reference/commandline/image_prune/">Image prune reference</a></p>
<p><strong>Remove Docker container</strong></p>
<p>Docker container can be removed by using the command below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Remove selected container:
docker rm &lt;container_ID&gt;

Remove all container:
docker container prune
</pre></div>
</div>
<p>For more information refer here.
<a class="reference external" href="https://docs.docker.com/engine/reference/commandline/rm/">rm reference</a> and
<a class="reference external" href="https://docs.docker.com/engine/reference/commandline/container_prune/">Container Prune reference</a></p>
</div>
<div class="section" id="relocating-docker-root-location">
<h2>Relocating Docker Root Location<a class="headerlink" href="#relocating-docker-root-location" title="Permalink to this headline">¶</a></h2>
<p>The default location for Docker files is <strong>/var/lib/docker</strong>. Any Docker images
created will be stored here. This will be a problem anytime the SD card is
updated with a new targetfs. If a secondary storage (SSD or USB based storage)
is available, then it is recommended to relocate the default Docker root
location so as to preserve any existing Docker images. Once the relocation
has been done, the Docker content will not be affected by any future targetfs
updates or accidental corruptions of the SD card.</p>
<p>The following steps outline the process for Docker root directory relocation
assuming that the current Docker root is not at the desired location. If the
current location is the desired location then exit this procedure.</p>
<ol class="arabic simple">
<li><p>Run ‘Docker info’ command and inspect the output. Locate the line with
content <strong>Docker Root Dir</strong>. It will list the current location.</p></li>
<li><p>To preserve any existing images, export them to .tar files for importing
later into the new location.</p></li>
<li><p>Inspect the content under /etc/docker to see if there is a file by name
<strong>daemon.json</strong>. If the file is not present then create <strong>/etc/docker/docker.json</strong>
and add the following content. Update the ‘key:value’ pair for the key “graph”
to reflect the desired root location. If the file already exists, then make
sure that the line with “graph” exists in the file and points to the desired
target location.</p></li>
</ol>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;graph&quot;</span><span class="p">:</span> <span class="s2">&quot;/run/media/nvme0n1/docker_root&quot;</span><span class="p">,</span>
  <span class="nt">&quot;storage-driver&quot;</span><span class="p">:</span> <span class="s2">&quot;overlay&quot;</span><span class="p">,</span>
  <span class="nt">&quot;live-restore&quot;</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In the configuration above, the key/value pair
<strong>‘“graph”: “/run/media/nvme0n1/docker_root”’</strong> defines the root location
<strong>‘/run/media/nvme0n1/docker_root’.</strong></p>
<ol class="arabic simple" start="4">
<li><p>Once the daemon.json file has been copied and updated, run the following
commands</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ systemctl restart docker
$ docker info
</pre></div>
</div>
<p>Make sure that the new Docker root appears under <strong>Docker Root Dir</strong> value.</p>
<ol class="arabic simple" start="5">
<li><p>If you exported the existing images in step (2) then import them and they
will appear under the new Docker root.</p></li>
<li><p>Anytime the SD card is updated with a new targetfs, steps (1), (3), and
(4) need to be followed.</p></li>
</ol>
<p><strong>Additional references</strong></p>
<div class="line-block">
<div class="line"><a class="reference external" href="https://docs.docker.com/engine/reference/commandline/images/">https://docs.docker.com/engine/reference/commandline/images/</a></div>
<div class="line"><a class="reference external" href="https://docs.docker.com/engine/reference/commandline/ps/">https://docs.docker.com/engine/reference/commandline/ps/</a></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="data_flows.html" class="btn btn-neutral float-right" title="Data Flows" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="running_advance_demos.html" class="btn btn-neutral" title="Running Advance demos" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
      <a href="http://www.ti.com/corp/docs/legal/copyright.shtml">&copy; Copyright 2021-2022</a>, Texas Instruments Incorporated. All rights reserved. <br>
      <a href="http://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="http://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="http://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="http://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

    <script src="http://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript" charset="utf-8"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
        });

      var menuHeight = window.innerHeight;

      var contentOffset = $(".wy-nav-content-wrap").offset();
      var contentHeight = $(".wy-nav-content-wrap").height();
      var contentBottom = contentOffset.top + contentHeight;

      function setNavbarTop() {
          var scrollTop = $(window).scrollTop();
          var maxTop = scrollTop + menuHeight;

          // If past the header
          if (scrollTop > contentOffset.top && maxTop < contentBottom) {
            stickyTop = scrollTop - contentOffset.top;
          } else if (maxTop > contentBottom) {
            stickyTop = scrollTop - contentOffset.top - (maxTop - contentBottom);
          } else {
            stickyTop = 0;
          }

          $(".wy-nav-side").css("top", stickyTop);
      }

      $(document).ready(function() {
        setNavbarTop();
        $(window).scroll(function () {
          setNavbarTop();
        });
      });
  </script>
   

</body>
</html>